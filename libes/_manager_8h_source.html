<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>libes: Manager.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libes
   &#160;<span id="projectnumber">0.5.3</span>
   </div>
   <div id="projectbrief">an Entity System library for C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_b0856f6b0d80ccb263b2f415c91f9e17.html">include</a></li><li class="navelem"><a class="el" href="dir_0302914445fea4c925e07e812efbb819.html">es</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Manager.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2013-2014, Julien Bernard</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Permission to use, copy, modify, and/or distribute this software for any</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * purpose with or without fee is hereby granted, provided that the above</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * copyright notice and this permission notice appear in all copies.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot; AND THE AUTHOR DISCLAIMS ALL WARRANTIES</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#ifndef ES_MANAGER_H</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#define ES_MANAGER_H</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;type_traits&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;es/Entity.h&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;es/Event.h&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;es/EventHandler.h&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;es/Store.h&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;es/System.h&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">namespace </span>es {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="classes_1_1_manager.html">   41</a></span>&#160;  <span class="keyword">class </span><a class="code" href="classes_1_1_manager.html">Manager</a> {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="classes_1_1_manager.html#a5632c30e61b2827ef4686262301f79e4">   46</a></span>&#160;    <a class="code" href="classes_1_1_manager.html#a5632c30e61b2827ef4686262301f79e4">Manager</a>()</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    : m_next(1) { }</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="classes_1_1_manager.html#a142be31fcc20947e352bfac24359cf97">~Manager</a>();</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="namespacees.html#ab9b78ea0acdbe2080b3163f6baeedad6">Entity</a> <a class="code" href="classes_1_1_manager.html#a75d5ba7d132aeaec5a041d26e834d8a8">createEntity</a>();</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classes_1_1_manager.html#ab72668039d7ad0d4788afd5d75aec269">destroyEntity</a>(<a class="code" href="namespacees.html#ab9b78ea0acdbe2080b3163f6baeedad6">Entity</a> e);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    std::set&lt;Entity&gt; <a class="code" href="classes_1_1_manager.html#a2faaa05d7f928c8c3af31bbae54263e8">getEntities</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="classes_1_1_store.html">Store</a> *<a class="code" href="classes_1_1_manager.html#ae5dfcae2a70b98ad0ed1011c4f544e22">getStore</a>(<a class="code" href="namespacees.html#a87a216b1f9f50a6df68578fb048095cb">ComponentType</a> ct);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classes_1_1_manager.html#aa9c3ed06740237b37db37e3b4893a985">createStoreFor</a>(<a class="code" href="namespacees.html#a87a216b1f9f50a6df68578fb048095cb">ComponentType</a> ct);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> C&gt;</div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="classes_1_1_manager.html#aa9c3ed06740237b37db37e3b4893a985">  102</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classes_1_1_manager.html#aa9c3ed06740237b37db37e3b4893a985">createStoreFor</a>() {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      static_assert(std::is_base_of&lt;Component, C&gt;::value, <span class="stringliteral">&quot;C must be a Component&quot;</span>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      static_assert(C::type != INVALID_COMPONENT, <span class="stringliteral">&quot;C must define its type&quot;</span>);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classes_1_1_manager.html#aa9c3ed06740237b37db37e3b4893a985">createStoreFor</a>(C::type);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="structes_1_1_component.html">Component</a> *<a class="code" href="classes_1_1_manager.html#a58fa7c34ad3dbd4179c368924b8b77a5">getComponent</a>(<a class="code" href="namespacees.html#ab9b78ea0acdbe2080b3163f6baeedad6">Entity</a> e, <a class="code" href="namespacees.html#a87a216b1f9f50a6df68578fb048095cb">ComponentType</a> ct);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> C&gt;</div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="classes_1_1_manager.html#a28a9983791e6bf1da7dd6141deff8795">  131</a></span>&#160;    C *<a class="code" href="classes_1_1_manager.html#a28a9983791e6bf1da7dd6141deff8795">getComponent</a>(<a class="code" href="namespacees.html#ab9b78ea0acdbe2080b3163f6baeedad6">Entity</a> e) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      static_assert(std::is_base_of&lt;Component, C&gt;::value, <span class="stringliteral">&quot;C must be a Component&quot;</span>);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      static_assert(C::type != INVALID_COMPONENT, <span class="stringliteral">&quot;C must define its type&quot;</span>);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>C*<span class="keyword">&gt;</span>(<a class="code" href="classes_1_1_manager.html#a58fa7c34ad3dbd4179c368924b8b77a5">getComponent</a>(e, C::type));</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classes_1_1_manager.html#a11b25fb314a637a33240e0c65a97467d">addComponent</a>(<a class="code" href="namespacees.html#ab9b78ea0acdbe2080b3163f6baeedad6">Entity</a> e, <a class="code" href="namespacees.html#a87a216b1f9f50a6df68578fb048095cb">ComponentType</a> ct, <a class="code" href="structes_1_1_component.html">Component</a> *c);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> C&gt;</div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="classes_1_1_manager.html#aec917c8fcc3bd2005e76b1c1eb41933b">  155</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classes_1_1_manager.html#aec917c8fcc3bd2005e76b1c1eb41933b">addComponent</a>(<a class="code" href="namespacees.html#ab9b78ea0acdbe2080b3163f6baeedad6">Entity</a> e, C *c) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      static_assert(std::is_base_of&lt;Component, C&gt;::value, <span class="stringliteral">&quot;C must be a Component&quot;</span>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      static_assert(C::type != INVALID_COMPONENT, <span class="stringliteral">&quot;C must define its type&quot;</span>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classes_1_1_manager.html#a11b25fb314a637a33240e0c65a97467d">addComponent</a>(e, C::type, c);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="structes_1_1_component.html">Component</a> *<a class="code" href="classes_1_1_manager.html#aced064c1e1251d9d88dc569eae57a51b">extractComponent</a>(<a class="code" href="namespacees.html#ab9b78ea0acdbe2080b3163f6baeedad6">Entity</a> e, <a class="code" href="namespacees.html#a87a216b1f9f50a6df68578fb048095cb">ComponentType</a> ct);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> C&gt;</div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="classes_1_1_manager.html#ac65f8c653d7a7ab7477148d4776bff6c">  183</a></span>&#160;    C *<a class="code" href="classes_1_1_manager.html#ac65f8c653d7a7ab7477148d4776bff6c">extractComponent</a>(<a class="code" href="namespacees.html#ab9b78ea0acdbe2080b3163f6baeedad6">Entity</a> e) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      static_assert(std::is_base_of&lt;Component, C&gt;::value, <span class="stringliteral">&quot;C must be a Component&quot;</span>);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      static_assert(C::type != INVALID_COMPONENT, <span class="stringliteral">&quot;C must define its type&quot;</span>);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>C*<span class="keyword">&gt;</span>(<a class="code" href="classes_1_1_manager.html#aced064c1e1251d9d88dc569eae57a51b">extractComponent</a>(e, C::type));</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classes_1_1_manager.html#aed62d7a88a67aa0f1cbfda6af0f06ec5">subscribeEntityToSystems</a>(<a class="code" href="namespacees.html#ab9b78ea0acdbe2080b3163f6baeedad6">Entity</a> e, std::set&lt;ComponentType&gt; components);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classes_1_1_manager.html#aed62d7a88a67aa0f1cbfda6af0f06ec5">subscribeEntityToSystems</a>(<a class="code" href="namespacees.html#ab9b78ea0acdbe2080b3163f6baeedad6">Entity</a> e);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classes_1_1_manager.html#a2c7cde54e06834d4bdcedded9de65d87">addSystem</a>(std::shared_ptr&lt;System&gt; sys);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> S, <span class="keyword">typename</span> ... Args&gt;</div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="classes_1_1_manager.html#aa669a08e12b3c5f6b0e4689e2619db96">  233</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classes_1_1_manager.html#aa669a08e12b3c5f6b0e4689e2619db96">addSystem</a>(Args&amp;&amp;... args) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      static_assert(std::is_base_of&lt;System, S&gt;::value, <span class="stringliteral">&quot;S must be a System&quot;</span>);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classes_1_1_manager.html#a2c7cde54e06834d4bdcedded9de65d87">addSystem</a>(std::make_shared&lt;S&gt;(std::forward&lt;Args&gt;(args)...));</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classes_1_1_manager.html#a5676b0981625971c72243c528eb67f45">initSystems</a>();</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classes_1_1_manager.html#a324fd6c3cdebb32b4cf721b4b2b9158f">updateSystems</a>(<span class="keywordtype">float</span> delta);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classes_1_1_manager.html#a8b3c02bc0f5a2b1a522686b47347dbd6">registerHandler</a>(<a class="code" href="namespacees.html#a901cb0e8d00acb13d749e730f9688198">EventType</a> type, <a class="code" href="namespacees.html#aa166f673b354bd4c6d149500dbef0c66">EventHandler</a> handler);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> E&gt;</div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="classes_1_1_manager.html#ac5be79b87f4161c30dd3af82f6fdd088">  269</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classes_1_1_manager.html#ac5be79b87f4161c30dd3af82f6fdd088">registerHandler</a>(<a class="code" href="namespacees.html#aa166f673b354bd4c6d149500dbef0c66">EventHandler</a> handler) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      static_assert(std::is_base_of&lt;Event, E&gt;::value, <span class="stringliteral">&quot;E must be an Event&quot;</span>);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      static_assert(E::type != INVALID_EVENT, <span class="stringliteral">&quot;E must define its type&quot;</span>);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <a class="code" href="classes_1_1_manager.html#a8b3c02bc0f5a2b1a522686b47347dbd6">registerHandler</a>(E::type, handler);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> E, <span class="keyword">typename</span> R, <span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="classes_1_1_manager.html#a1172263736b2c7b55eb416d93308607e">  287</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classes_1_1_manager.html#a1172263736b2c7b55eb416d93308607e">registerHandler</a>(R T::*pm, T *obj) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      static_assert(std::is_base_of&lt;Event, E&gt;::value, <span class="stringliteral">&quot;E must be an Event&quot;</span>);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      static_assert(E::type != INVALID_EVENT, <span class="stringliteral">&quot;E must define its type&quot;</span>);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <a class="code" href="classes_1_1_manager.html#a8b3c02bc0f5a2b1a522686b47347dbd6">registerHandler</a>(E::type,</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;          std::bind(pm, obj, std::placeholders::_1, std::placeholders::_2, std::placeholders::_3));</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classes_1_1_manager.html#aff18e80312aaca11c083467576835f7a">triggerEvent</a>(<a class="code" href="namespacees.html#ab9b78ea0acdbe2080b3163f6baeedad6">Entity</a> origin, <a class="code" href="namespacees.html#a901cb0e8d00acb13d749e730f9688198">EventType</a> type, <a class="code" href="structes_1_1_event.html">Event</a> *event);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keyword">template</span>&lt;<span class="keyword">typename</span> E&gt;</div>
<div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="classes_1_1_manager.html#a09e4a33d630bdb0f6111af5db2d64557">  314</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classes_1_1_manager.html#a09e4a33d630bdb0f6111af5db2d64557">triggerEvent</a>(<a class="code" href="namespacees.html#ab9b78ea0acdbe2080b3163f6baeedad6">Entity</a> origin, E *event) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      static_assert(std::is_base_of&lt;Event, E&gt;::value, <span class="stringliteral">&quot;E must be an Event&quot;</span>);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      static_assert(E::type != INVALID_EVENT, <span class="stringliteral">&quot;E must define its type&quot;</span>);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <a class="code" href="classes_1_1_manager.html#aff18e80312aaca11c083467576835f7a">triggerEvent</a>(origin, E::type, event);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keyword">private</span>:</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <a class="code" href="namespacees.html#ab9b78ea0acdbe2080b3163f6baeedad6">Entity</a> m_next;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    std::map&lt;Entity, std::set&lt;ComponentType&gt;&gt; m_entities;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    std::vector&lt;std::shared_ptr&lt;System&gt;&gt; m_systems;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    std::map&lt;ComponentType, Store *&gt; m_stores;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    std::map&lt;EventType, std::vector&lt;EventHandler&gt;&gt; m_handlers;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  };</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;}</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="preprocessor">#endif // ES_MANAGER_H</span></div>
<div class="ttc" id="classes_1_1_manager_html_a5632c30e61b2827ef4686262301f79e4"><div class="ttname"><a href="classes_1_1_manager.html#a5632c30e61b2827ef4686262301f79e4">es::Manager::Manager</a></div><div class="ttdeci">Manager()</div><div class="ttdoc">Create a manager. </div><div class="ttdef"><b>Definition:</b> Manager.h:46</div></div>
<div class="ttc" id="namespacees_html_ab9b78ea0acdbe2080b3163f6baeedad6"><div class="ttname"><a href="namespacees.html#ab9b78ea0acdbe2080b3163f6baeedad6">es::Entity</a></div><div class="ttdeci">unsigned long Entity</div><div class="ttdoc">An entity, a game object. </div><div class="ttdef"><b>Definition:</b> Entity.h:27</div></div>
<div class="ttc" id="classes_1_1_manager_html_ac5be79b87f4161c30dd3af82f6fdd088"><div class="ttname"><a href="classes_1_1_manager.html#ac5be79b87f4161c30dd3af82f6fdd088">es::Manager::registerHandler</a></div><div class="ttdeci">void registerHandler(EventHandler handler)</div><div class="ttdoc">Register an event handler to an event type. </div><div class="ttdef"><b>Definition:</b> Manager.h:269</div></div>
<div class="ttc" id="classes_1_1_manager_html_a2c7cde54e06834d4bdcedded9de65d87"><div class="ttname"><a href="classes_1_1_manager.html#a2c7cde54e06834d4bdcedded9de65d87">es::Manager::addSystem</a></div><div class="ttdeci">bool addSystem(std::shared_ptr&lt; System &gt; sys)</div><div class="ttdoc">Add a system to the manager. </div></div>
<div class="ttc" id="classes_1_1_manager_html_a1172263736b2c7b55eb416d93308607e"><div class="ttname"><a href="classes_1_1_manager.html#a1172263736b2c7b55eb416d93308607e">es::Manager::registerHandler</a></div><div class="ttdeci">void registerHandler(R T::*pm, T *obj)</div><div class="ttdoc">Register an event handler to an event type. </div><div class="ttdef"><b>Definition:</b> Manager.h:287</div></div>
<div class="ttc" id="classes_1_1_manager_html_a5676b0981625971c72243c528eb67f45"><div class="ttname"><a href="classes_1_1_manager.html#a5676b0981625971c72243c528eb67f45">es::Manager::initSystems</a></div><div class="ttdeci">void initSystems()</div><div class="ttdoc">Initialize all systems. </div></div>
<div class="ttc" id="namespacees_html_a901cb0e8d00acb13d749e730f9688198"><div class="ttname"><a href="namespacees.html#a901cb0e8d00acb13d749e730f9688198">es::EventType</a></div><div class="ttdeci">Type EventType</div><div class="ttdoc">An event type. </div><div class="ttdef"><b>Definition:</b> Event.h:29</div></div>
<div class="ttc" id="namespacees_html_aa166f673b354bd4c6d149500dbef0c66"><div class="ttname"><a href="namespacees.html#aa166f673b354bd4c6d149500dbef0c66">es::EventHandler</a></div><div class="ttdeci">std::function&lt; EventStatus(Entity, EventType, Event *)&gt; EventHandler</div><div class="ttdoc">An event handler. </div><div class="ttdef"><b>Definition:</b> EventHandler.h:42</div></div>
<div class="ttc" id="classes_1_1_manager_html_aec917c8fcc3bd2005e76b1c1eb41933b"><div class="ttname"><a href="classes_1_1_manager.html#aec917c8fcc3bd2005e76b1c1eb41933b">es::Manager::addComponent</a></div><div class="ttdeci">bool addComponent(Entity e, C *c)</div><div class="ttdoc">Add a component to an entity. </div><div class="ttdef"><b>Definition:</b> Manager.h:155</div></div>
<div class="ttc" id="structes_1_1_event_html"><div class="ttname"><a href="structes_1_1_event.html">es::Event</a></div><div class="ttdoc">An event. </div><div class="ttdef"><b>Definition:</b> Event.h:39</div></div>
<div class="ttc" id="classes_1_1_manager_html_a142be31fcc20947e352bfac24359cf97"><div class="ttname"><a href="classes_1_1_manager.html#a142be31fcc20947e352bfac24359cf97">es::Manager::~Manager</a></div><div class="ttdeci">~Manager()</div></div>
<div class="ttc" id="classes_1_1_manager_html_aed62d7a88a67aa0f1cbfda6af0f06ec5"><div class="ttname"><a href="classes_1_1_manager.html#aed62d7a88a67aa0f1cbfda6af0f06ec5">es::Manager::subscribeEntityToSystems</a></div><div class="ttdeci">int subscribeEntityToSystems(Entity e, std::set&lt; ComponentType &gt; components)</div><div class="ttdoc">Subscribe and entity to the systems. </div></div>
<div class="ttc" id="classes_1_1_manager_html_a2faaa05d7f928c8c3af31bbae54263e8"><div class="ttname"><a href="classes_1_1_manager.html#a2faaa05d7f928c8c3af31bbae54263e8">es::Manager::getEntities</a></div><div class="ttdeci">std::set&lt; Entity &gt; getEntities() const </div><div class="ttdoc">Get all the entities. </div></div>
<div class="ttc" id="classes_1_1_manager_html_ae5dfcae2a70b98ad0ed1011c4f544e22"><div class="ttname"><a href="classes_1_1_manager.html#ae5dfcae2a70b98ad0ed1011c4f544e22">es::Manager::getStore</a></div><div class="ttdeci">Store * getStore(ComponentType ct)</div><div class="ttdoc">Get the store associated to a component type. </div></div>
<div class="ttc" id="classes_1_1_manager_html_aa9c3ed06740237b37db37e3b4893a985"><div class="ttname"><a href="classes_1_1_manager.html#aa9c3ed06740237b37db37e3b4893a985">es::Manager::createStoreFor</a></div><div class="ttdeci">bool createStoreFor()</div><div class="ttdoc">Create a store for a component type. </div><div class="ttdef"><b>Definition:</b> Manager.h:102</div></div>
<div class="ttc" id="classes_1_1_manager_html_a11b25fb314a637a33240e0c65a97467d"><div class="ttname"><a href="classes_1_1_manager.html#a11b25fb314a637a33240e0c65a97467d">es::Manager::addComponent</a></div><div class="ttdeci">bool addComponent(Entity e, ComponentType ct, Component *c)</div><div class="ttdoc">Add a component to an entity. </div></div>
<div class="ttc" id="structes_1_1_component_html"><div class="ttname"><a href="structes_1_1_component.html">es::Component</a></div><div class="ttdoc">A component. </div><div class="ttdef"><b>Definition:</b> Component.h:39</div></div>
<div class="ttc" id="classes_1_1_manager_html_aff18e80312aaca11c083467576835f7a"><div class="ttname"><a href="classes_1_1_manager.html#aff18e80312aaca11c083467576835f7a">es::Manager::triggerEvent</a></div><div class="ttdeci">void triggerEvent(Entity origin, EventType type, Event *event)</div><div class="ttdoc">Trigger an event. </div></div>
<div class="ttc" id="classes_1_1_manager_html_a28a9983791e6bf1da7dd6141deff8795"><div class="ttname"><a href="classes_1_1_manager.html#a28a9983791e6bf1da7dd6141deff8795">es::Manager::getComponent</a></div><div class="ttdeci">C * getComponent(Entity e)</div><div class="ttdoc">Get the component associated to an entity. </div><div class="ttdef"><b>Definition:</b> Manager.h:131</div></div>
<div class="ttc" id="classes_1_1_store_html"><div class="ttname"><a href="classes_1_1_store.html">es::Store</a></div><div class="ttdoc">A store. </div><div class="ttdef"><b>Definition:</b> Store.h:36</div></div>
<div class="ttc" id="namespacees_html_a87a216b1f9f50a6df68578fb048095cb"><div class="ttname"><a href="namespacees.html#a87a216b1f9f50a6df68578fb048095cb">es::ComponentType</a></div><div class="ttdeci">Type ComponentType</div><div class="ttdoc">A component type. </div><div class="ttdef"><b>Definition:</b> Component.h:29</div></div>
<div class="ttc" id="classes_1_1_manager_html_aced064c1e1251d9d88dc569eae57a51b"><div class="ttname"><a href="classes_1_1_manager.html#aced064c1e1251d9d88dc569eae57a51b">es::Manager::extractComponent</a></div><div class="ttdeci">Component * extractComponent(Entity e, ComponentType ct)</div><div class="ttdoc">Extract the component associated to an entity. </div></div>
<div class="ttc" id="classes_1_1_manager_html_a8b3c02bc0f5a2b1a522686b47347dbd6"><div class="ttname"><a href="classes_1_1_manager.html#a8b3c02bc0f5a2b1a522686b47347dbd6">es::Manager::registerHandler</a></div><div class="ttdeci">void registerHandler(EventType type, EventHandler handler)</div><div class="ttdoc">Register an event handler to an event type. </div></div>
<div class="ttc" id="classes_1_1_manager_html"><div class="ttname"><a href="classes_1_1_manager.html">es::Manager</a></div><div class="ttdoc">The manager. </div><div class="ttdef"><b>Definition:</b> Manager.h:41</div></div>
<div class="ttc" id="classes_1_1_manager_html_ac65f8c653d7a7ab7477148d4776bff6c"><div class="ttname"><a href="classes_1_1_manager.html#ac65f8c653d7a7ab7477148d4776bff6c">es::Manager::extractComponent</a></div><div class="ttdeci">C * extractComponent(Entity e)</div><div class="ttdoc">Extract the component associated to an entity. </div><div class="ttdef"><b>Definition:</b> Manager.h:183</div></div>
<div class="ttc" id="classes_1_1_manager_html_a324fd6c3cdebb32b4cf721b4b2b9158f"><div class="ttname"><a href="classes_1_1_manager.html#a324fd6c3cdebb32b4cf721b4b2b9158f">es::Manager::updateSystems</a></div><div class="ttdeci">void updateSystems(float delta)</div><div class="ttdoc">Update all systems. </div></div>
<div class="ttc" id="classes_1_1_manager_html_a09e4a33d630bdb0f6111af5db2d64557"><div class="ttname"><a href="classes_1_1_manager.html#a09e4a33d630bdb0f6111af5db2d64557">es::Manager::triggerEvent</a></div><div class="ttdeci">void triggerEvent(Entity origin, E *event)</div><div class="ttdoc">Trigger an event. </div><div class="ttdef"><b>Definition:</b> Manager.h:314</div></div>
<div class="ttc" id="classes_1_1_manager_html_a58fa7c34ad3dbd4179c368924b8b77a5"><div class="ttname"><a href="classes_1_1_manager.html#a58fa7c34ad3dbd4179c368924b8b77a5">es::Manager::getComponent</a></div><div class="ttdeci">Component * getComponent(Entity e, ComponentType ct)</div><div class="ttdoc">Get the component associated to an entity. </div></div>
<div class="ttc" id="classes_1_1_manager_html_ab72668039d7ad0d4788afd5d75aec269"><div class="ttname"><a href="classes_1_1_manager.html#ab72668039d7ad0d4788afd5d75aec269">es::Manager::destroyEntity</a></div><div class="ttdeci">bool destroyEntity(Entity e)</div><div class="ttdoc">Destroy an entity. </div></div>
<div class="ttc" id="classes_1_1_manager_html_aa669a08e12b3c5f6b0e4689e2619db96"><div class="ttname"><a href="classes_1_1_manager.html#aa669a08e12b3c5f6b0e4689e2619db96">es::Manager::addSystem</a></div><div class="ttdeci">bool addSystem(Args &amp;&amp;...args)</div><div class="ttdoc">Add a system to the manager. </div><div class="ttdef"><b>Definition:</b> Manager.h:233</div></div>
<div class="ttc" id="classes_1_1_manager_html_a75d5ba7d132aeaec5a041d26e834d8a8"><div class="ttname"><a href="classes_1_1_manager.html#a75d5ba7d132aeaec5a041d26e834d8a8">es::Manager::createEntity</a></div><div class="ttdeci">Entity createEntity()</div><div class="ttdoc">Create a new entity. </div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jul 22 2014 21:59:26 for libes by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
